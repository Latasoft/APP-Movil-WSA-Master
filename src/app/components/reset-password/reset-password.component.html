<ion-header >
  <ion-toolbar>
    <ion-title>Recuperar contraseña</ion-title>
    <ion-buttons slot="end">
      <ion-back-button defaultHref="/login"></ion-back-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content class="ion-padding login-content">
  <!-- Fondo con silueta -->
  <div class="hero-bg"></div>

  <!-- Card flotante -->
  <div class="login-card">
    <div class="login-icon">
      <img src="/assets/logoWSA.svg" alt="Logo WSA" />
    </div>
 
    <h2 class="login-header">¿Olvidaste tu contraseña?</h2>
    <p class="login-subtitle">Ingresa tu correo y te enviaremos un enlace para restablecerla</p>

    <form [formGroup]="form" (ngSubmit)="solicitarReset()">
      <ion-item class="input-item">
        <ion-label position="floating">Correo electrónico</ion-label>
        <ion-input type="email" formControlName="email"></ion-input>
      </ion-item>

      <ion-text color="danger" *ngIf="form.get('email')?.invalid && form.get('email')?.touched">
        <p class="validation-text">Ingresa un correo válido</p>
      </ion-text>

      <ion-button expand="block" class="btn-primary" type="submit" [disabled]="form.invalid || loading">
        Enviar correo de recuperación
      </ion-button>
    </form>

    <!-- Mensaje inmediato -->
    <ion-text color="medium" *ngIf="mostrandoEnvio && loading">
      <p class="info-text">Si el correo está registrado, enviaremos un enlace para restablecer tu contraseña.</p>
    </ion-text>

    <ion-text color="success" *ngIf="mensaje && !loading">
      <p class="success-text">{{ mensaje }}</p>
    </ion-text>

    <ion-text color="danger" *ngIf="error && !loading">
      <p class="error-text">{{ error }}</p>
    </ion-text>
  </div>

  <!-- Spinner de carga -->
  <ion-loading
    [isOpen]="loading"
    message="Enviando solicitud..."
    spinner="crescent"
    backdropDismiss="false">
  </ion-loading>
</ion-content>
